<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Labour‑Net - Home</title>
    <style>
        :root{
          --bg:#f8fafc; --primary:#2563eb; --primary-dark:#1d4ed8;
          --muted:#64748b; --card:#fff; --radius:14px; --shadow:0 6px 24px rgba(0,0,0,0.06);
          font-family: "Segoe UI", Roboto, Arial;
        }
        body{margin:0;background:var(--bg);color:#0f172a}
        header{background:white;box-shadow:0 2px 8px rgba(0,0,0,.05);padding:14px 40px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1000}
        header h1{margin:0;font-size:26px;color:var(--primary);font-weight:800;letter-spacing:-0.5px}
        .brand{background:linear-gradient(135deg,#2563eb 0%,#22c55e 100%);-webkit-background-clip:text;background-clip:text;color:transparent;filter:drop-shadow(0 2px 8px rgba(37,99,235,.25))}

        /* --- CSS for Horizontal Navigation --- */
        header nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            gap: 25px;
        }
        /* --- End of Horizontal Nav CSS --- */

        nav a{text-decoration:none;color:var(--muted);font-weight:500}
        nav a:hover{color:var(--primary-dark)}
        .hero{padding:90px 20px;text-align:center;background:linear-gradient(135deg,#2563eb 0%,#1d4ed8 60%,#0ea5e9 100%);color:white}
        .hero h2{font-size:56px;line-height:1.05;margin:0 0 14px;font-weight:800;letter-spacing:-1px;text-shadow:0 6px 28px rgba(0,0,0,.25)}
        .hero p{font-size:20px;margin:0 0 26px;opacity:.95}

        /* --- "Get Started" button style changed here --- */
        .hero a{background:var(--primary);color:white;padding:14px 28px;border-radius:10px;text-decoration:none;font-weight:700;box-shadow:0 10px 24px rgba(29,78,216,.35);transition:transform .15s ease, box-shadow .15s ease}
        .hero a:hover{transform:translateY(-1px);box-shadow:0 14px 32px rgba(29,78,216,.45)}

        .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;width:100%;max-width:950px;margin:40px auto}
        .card{background:var(--card);border-radius:var(--radius);padding:24px;text-align:center;box-shadow:var(--shadow)}
        .card h3{margin:0 0 8px}
        .card p{font-size:14px;color:var(--muted)}
        .features{padding:60px 20px;text-align:center}
        .features h2{font-size:28px;margin-bottom:20px}
        .contact{padding:60px 20px;background:#f1f5f9;text-align:center}
        .contact h2{margin-bottom:20px}
        form{max-width:500px;margin:auto;text-align:left}
        input,textarea{width:100%;padding:12px;margin:8px 0;border:1px solid #cbd5e1;border-radius:8px}
        button{background:var(--primary);color:white;padding:12px 20px;border:none;border-radius:8px;font-weight:600;cursor:pointer}
        button:hover{background:var(--primary-dark)}
        footer{margin-top:40px;color:var(--muted);font-size:13px;text-align:center;padding:20px}
    </style>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" th:href="@{/css/style.css}" />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body>
<header>
    <h1>Labour Net</h1>
    <nav>
        <ul>
            <li><a th:href="@{/}">Home</a></li>
            <li><a href="/workers">Worker</a></li>
            <li><a href="/agencies">Agency</a></li>
            <li><a href="/admin/login">Admin</a></li>
            <li><a href="#contact">Contact Us</a></li>
        </ul>
    </nav>
</header>

<section class="hero">
    <h2>Connecting Workers & Agencies Seamlessly</h2>
    <p>Find jobs, hire skilled workers, and grow together on one trusted platform.</p>
    <a th:href="@{/workers/register}">Get Started</a>
</section>

<section class="features">
    <h2>Why Labour Net?</h2>
    <div class="grid">
        <div class="card">
            <h3>Verified Workers</h3>
            <p>All workers are Aadhaar verified for trust & reliability.</p>
        </div>
        <div class="card">
            <h3>Trusted Agencies</h3>
            <p>Only licensed agencies can post jobs to ensure safety.</p>
        </div>
        <div class="card">
            <h3>Easy Applications</h3>
            <p>Workers can apply to jobs with one click, agencies can track applications.</p>
        </div>
    </div>
</section>

<section class="contact" id="contact">
    <h2>Contact Us</h2>
    <p>Have an issue or suggestion? Let us know!</p>
    <form th:action="@{/contact}" method="post">
        <input type="text" name="name" placeholder="Your Name" required>
        <input type="email" name="email" placeholder="Your Email" required>
        <textarea name="message" rows="5" placeholder="Your Message" required></textarea>
        <button type="submit">Send Message</button>
    </form>
</section>

<footer>
    &copy; 2025 Labour Chain. All rights reserved.
</footer>

<div id="chatbot-toggle" style="position:fixed;right:24px;bottom:24px;background:#2563eb;color:#fff;border:none;border-radius:26px;padding:12px 16px;box-shadow:0 6px 24px rgba(0,0,0,.15);cursor:pointer;z-index:1001;display:flex;align-items:center;gap:8px">
    <span>Ask Labour Net</span>
</div>

<div id="chatbot-panel" style="position:fixed;right:24px;bottom:88px;width:340px;max-height:62vh;background:#fff;border-radius:14px;box-shadow:0 12px 40px rgba(0,0,0,.18);display:none;flex-direction:column;overflow:hidden;z-index:1001">
    <div style="background:#1d4ed8;color:#fff;padding:12px 14px;font-weight:600;display:flex;align-items:center;justify-content:space-between">
        <span>Labour Net Assistant</span>
        <button id="chat-close" aria-label="Close" title="Close" style="background:transparent;border:none;color:#fff;font-size:18px;line-height:1;cursor:pointer;padding:4px">×</button>
    </div>
    <div id="chat-messages" style="padding:12px;height:280px;overflow:auto;background:#f8fafc"></div>
    <div style="display:flex;gap:8px;padding:10px;border-top:1px solid #e2e8f0;background:#fff">
        <input id="chat-input" type="text" placeholder="Ask about jobs, register, help..." style="flex:1;border:1px solid #cbd5e1;border-radius:10px;padding:10px" />
        <button id="chat-send" style="background:#2563eb;color:#fff;border:none;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer">Send</button>
    </div>
</div>

<script>
    const toggle = document.getElementById('chatbot-toggle');
    const panel = document.getElementById('chatbot-panel');
    const messages = document.getElementById('chat-messages');
    const input = document.getElementById('chat-input');
    const send = document.getElementById('chat-send');
    const closeBtn = document.getElementById('chat-close');

    function appendMessage(text, role) {
        const wrap = document.createElement('div');
        wrap.style.margin = '8px 0';
        const bubble = document.createElement('div');
        bubble.textContent = text;
        bubble.style.maxWidth = '85%';
        bubble.style.padding = '10px 12px';
        bubble.style.borderRadius = '12px';
        bubble.style.boxShadow = '0 2px 8px rgba(0,0,0,.06)';
        if (role === 'user') {
            wrap.style.display = 'flex';
            wrap.style.justifyContent = 'flex-end';
            bubble.style.background = '#2563eb';
            bubble.style.color = '#fff';
        } else {
            wrap.style.display = 'flex';
            wrap.style.justifyContent = 'flex-start';
            bubble.style.background = '#fff';
            bubble.style.color = '#0f172a';
        }
        wrap.appendChild(bubble);
        messages.appendChild(wrap);
        messages.scrollTop = messages.scrollHeight;
    }

    toggle.addEventListener('click', () => {
        panel.style.display = panel.style.display === 'none' || panel.style.display === '' ? 'flex' : 'none';
        if (panel.style.display === 'flex' && messages.childElementCount === 0) {
            appendMessage('Hi! I can help with worker/agency registration, login issues, job search and applications. How can I help today?', 'bot');
        }
    });

    closeBtn.addEventListener('click', () => { panel.style.display = 'none'; });

    async function sendMessage() {
        const text = input.value.trim();
        if (!text) return;
        appendMessage(text, 'user');
        input.value = '';
        appendMessage('Typing...', 'bot');
        try {
            const resp = await fetch('/api/chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ message: text })
            });
            const data = await resp.json();
            messages.lastChild.remove();
            appendMessage(String(data.reply || 'Sorry, no response.'), 'bot');
        } catch (e) {
            messages.lastChild.remove();
            appendMessage('There was a problem contacting the assistant. Please try again later.', 'bot');
        }
    }

    send.addEventListener('click', sendMessage);
    input.addEventListener('keydown', (e) => { if (e.key === 'Enter') sendMessage(); });
</script>
</body>
</html>